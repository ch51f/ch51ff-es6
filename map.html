<!DOCTYPE html>
<html lang="zh">
<head> 
	<meta charset="UTF-8">
	<title>基于浏览器的HTML5查找地理位置</title>
	<meta name="format-detection" content="telephone=no"> 
	<meta name="msapplication-tap-highlight" content="no"> 
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width"> 
	<meta name="apple-mobile-web-app-capable" content="yes"> 
	<meta name="apple-mobile-web-app-status-bar-style" content="black"> 
	<style>
		* {
			margin: 0;
			padding: 0;
		}
		#container {
			position: absolute;
			left: 0;
			top: 0;
			right: 0;
			bottom: 0;
		}
	</style>
</head>
<body>
	<div id="container"></div>
	<script src="https://api.map.baidu.com/api?v=1.4" type="text/javascript"></script>
	<script>
		function getLocation() {
			var options= {
				enableHighAccuracy: true,
				maximumAge: 1000
			}
			if(navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(onSuccess, onError, options);
			} else {
				alert("不支持geolocation")
			}
		}
		function onSuccess(position) {
			var longitude = position.coords.longitude + 0.008774687519;
			var latitude = position.coords.latitude + 0.00374531687912;

			var map = new BMap.Map('container');

			var point = new BMap.Point(longitude, latitude);
			map.centerAndZoom(point, 19);
			var marker = new BMap.Marker(point);
			marker.enableDragging(); 
			map.addOverlay(marker);
		}
		function onError(error) {
			switch(error.code) {
				case 1:
					alert("位置服务被拒绝");
					break;
				case 2:
					alert("暂时获取不到位置信息");
					break;
				case 3:
					alert("获取信息超时");
					break;
				case 4:
					alert("未知错误");
					break;
			}
		}
		window.onload = getLocation;
	</script>
</body>
</html>